@inherits BaseInteractiveComponent
<button @onclick="OnClickHandler"
        class="@GetClasses()"
        type="@Type"
        disabled="@Disabled"
        @attributes="AdditionalAttributes">
    @if (Loading)
    {
        <span class="button-loader"></span>
    }
    @if (ChildContent != null)
    {
        @ChildContent
    }
    else
    {
        @Text
    }
</button>

@code {
    [Parameter]
    public string Text { get; set; } = "";

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public EventCallback<MouseEventArgs> OnClick { get; set; }

    [Parameter]
    public Styling.Theme? Theme { get; set; }

    [Parameter]
    public Styling.Button.Variant? Variant { get; set; }

    [Parameter]
    public Styling.Button.Type Type { get; set; } = Styling.Button.Type.Button;

    [Parameter]
    public bool Loading { get; set; } = false;

    [Parameter]
    public Styling.Size? Size { get; set; }

    private async Task OnClickHandler(MouseEventArgs args)
    {
        if (!Disabled && OnClick.HasDelegate)
        {
            await OnClick.InvokeAsync(args);
        }
    }

    protected override string GetClasses()
    {
        var classes = new List<string> { "button" };

        var variant = Variant ?? Styling.Button.Variant.Filled;
        var theme = Theme ?? Styling.Theme.Primary;
        var size = Size ?? Styling.Size.Small;

        // Apply outline style if specified
        if (variant != Styling.Button.Variant.Filled)
        {
            classes.Add($"button-{variant.ToString().ToLower()}");
        }

        classes.Add($"button-{theme.ToString().ToLower()}");
        classes.Add($"button-{size.ToString().ToLower()}");

        // Apply loading state
        if (Loading)
        {
            classes.Add("button-loading");
        }

        return string.Join(" ", classes);
    }
}